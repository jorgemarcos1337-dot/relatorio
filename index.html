<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF--8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Análise de Evasão - Manta</title>
    <style>
        /* Estilos gerais para uma melhor visualização */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; background-color: #f4f7fa; color: #333; margin: 0; }
        .container { max-width: 1400px; margin: 20px auto; padding: 0 20px; }
        header { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        h1, h2, h3 { color: #1a253c; }
        h1 { font-size: 1.8em; text-align: center; margin-bottom: 20px;}
        h2 { font-size: 1.5em; border-bottom: 2px solid #e1e5e8; padding-bottom: 10px; margin-top: 40px;}
        h3 { font-size: 1.2em; }
        /* Área do Cabeçalho */
        .header-filters { display: flex; justify-content: space-between; align-items: center; gap: 20px; flex-wrap: wrap; }
        .filter-group { display: flex; flex-direction: column; }
        .filter-group label { font-weight: bold; margin-bottom: 5px; font-size: 0.9em; }
        .filter-group select, .filter-group input { padding: 8px; border-radius: 5px; border: 1px solid #ccc; background-color: #fff; }
        .kpi-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .kpi-card { background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); text-align: center; }
        .kpi-card .value { font-size: 2em; font-weight: bold; color: #0056b3; margin: 10px 0 0 0; }
        .kpi-card .label { font-size: 1em; color: #555; }
        /* Áreas de Gráficos e Tabelas */
        .section { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-top: 30px; }
        .chart-container { width: 100%; min-height: 350px; background-color: #f9f9f9; border: 1px dashed #ccc; display: flex; align-items: center; justify-content: center; color: #888; text-align: center; border-radius: 5px; margin-top: 15px;}
        .columns-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        /* Tabela Interativa */
        .table-wrapper { overflow-x: auto; max-height: 400px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px 15px; border: 1px solid #e1e5e8; text-align: left; }
        thead { background-color: #eef2f5; position: sticky; top: 0; }
        th { font-weight: bold; cursor: pointer; }
        th:hover { background-color: #dde4e9; }
        tbody tr:nth-child(even) { background-color: #f9f9f9; }
        tbody tr:hover { background-color: #f1f5f8; }
        /* Botão de Exportação */
        .export-button { padding: 10px 20px; background-color: #1a253c; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; float: right; }
        .export-button:hover { background-color: #0056b3; }
        /* Layout Responsivo */
        @media (max-width: 900px) { .columns-layout { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .header-filters { flex-direction: column; align-items: stretch; } }
    </style>
</head>
<body>

    <div class="container">

        <header>
            <h1>Dashboard de Análise de Evasão - Manta</h1>
            <div class="header-filters">
                <div class="filter-group">
                    <label for="period-filter">Filtro de Período</label>
                    <select id="period-filter" name="period">
                        <option value="last12">Últimos 12 meses</option>
                        <option value="current_year">Ano Corrente</option>
                        </select>
                </div>
                <div class="filter-group">
                    <label for="unit-filter">Filtro por Unidade(s)</label>
                    <select id="unit-filter" name="unit" multiple size="3">
                        <option value="all" selected>Todas as Unidades</option>
                        <option value="712N">712N</option>
                        <option value="610S">610S</option>
                        <option value="VP">VP</option>
                        <option value="303SW">303SW</option>
                        <option value="702S">702S</option>
                    </select>
                </div>
                <button class="export-button" title="Exportar dados da visão atual para CSV/Excel">
                    Exportar para Planilha
                </button>
            </div>

            <div class="kpi-container">
                <div class="kpi-card">
                    <div class="label">Nº Total de Alunos Ativos</div>
                    <div class="value">4.441</div>
                </div>
                <div class="kpi-card">
                    <div class="label">Total de Evasão (no período)</div>
                    <div class="value">2.211</div>
                </div>
                <div class="kpi-card">
                    <div class="label">Taxa de Churn (no período)</div>
                    <div class="value">33,3%</div>
                </div>
                <div class="kpi-card">
                    <div class="label">Impacto Financeiro Anualizado</div>
                    <div class="value">R$ 8,9 mi</div>
                </div>
            </div>
        </header>

        <section class="section">
            <h2>Panorama da Evasão: A Cara do Nosso Problema</h2>
            <div class="columns-layout">
                <div>
                    <h3>Evasão por Motivo (Desistência vs. Cancelamento)</h3>
                    <div class="chart-container">
                        <p><strong>[Gráfico de Pizza]</strong><br>Desistentes: 62% | Cancelados: 38%</p>
                    </div>
                </div>
                <div>
                    <h3>Top 5 Unidades com Maior Evasão</h3>
                    <div class="chart-container">
                        <p><strong>[Gráfico de Barras Horizontais]</strong><br>Mostrando o total de evasão e a composição de desistentes/cancelados por unidade.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Análise Detalhada: Evasão vs. Clientes Ativos</h2>
            <div class="columns-layout">
                <div class="column">
                    <h3>Foco na EVASÃO</h3>
                    <div>
                        <h4>Evasão por Faixa Etária</h4>
                        <div class="chart-container">
                             <p><strong>[Gráfico de Barras Verticais]</strong><br>Destacando o pico de evasão na faixa de 5-6 anos.</p>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h4>Desistentes vs. Cancelados por Idade</h4>
                        <div class="chart-container">
                             <p><strong>[Gráfico de Linhas]</strong><br>Comparando as tendências de desistência e cancelamento por idade.</p>
                        </div>
                    </div>
                    <h4 style="margin-top: 20px;">Tabela Detalhada de Unidades</h4>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Unidade</th>
                                    <th>Total Evasão</th>
                                    <th>% Desistentes</th>
                                    <th>Impacto Financeiro Mensal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>712N</td><td>704</td><td>67,0%</td><td>R$ 278.319,36</td></tr>
                                <tr><td>610S</td><td>584</td><td>56,2%</td><td>R$ 194.699,76</td></tr>
                                <tr><td>VP</td><td>385</td><td>54,5%</td><td>R$ 70.766,85</td></tr>
                                <tr><td>303SW</td><td>282</td><td>63,1%</td><td>R$ 101.917,62</td></tr>
                                <tr><td>702S</td><td>256</td><td>69,5%</td><td>R$ 96.061,44</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="column">
                    <h3>Foco nos CLIENTES ATIVOS</h3>
                    <div>
                        <h4>LTV Médio por Faixa Etária</h4>
                        <div class="chart-container">
                             <p><strong>[Gráfico de Barras Verticais]</strong><br>Mostrando o valor médio do cliente por idade.</p>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h4>Tempo Médio de Permanência por Idade</h4>
                        <div class="chart-container">
                            <p><strong>[Gráfico de Linhas]</strong><br>Mostrando a fidelidade dos clientes por idade.</p>
                        </div>
                    </div>
                    <h4 style="margin-top: 20px;">Tabela Detalhada de Ativos por Idade</h4>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Idade</th>
                                    <th>Nº de Ativos</th>
                                    <th>Tempo Médio (Meses)</th>
                                    <th>LTV Médio (R$)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>69</td><td>2.1</td><td>R$ 735.71</td></tr>
                                <tr><td>1</td><td>268</td><td>7.2</td><td>R$ 2,528.41</td></tr>
                                <tr><td>2</td><td>373</td><td>11.5</td><td>R$ 4,022.43</td></tr>
                                <tr><td>3</td><td>402</td><td>15.4</td><td>R$ 5,392.55</td></tr>
                                <tr><td>4</td><td>454</td><td>20.4</td><td>R$ 7,135.95</td></tr>
                                <tr><td>5</td><td>444</td><td>23.6</td><td>R$ 8,245.85</td></tr>
                                <tr><td>6</td><td>397</td><td>26.0</td><td>R$ 9,091.44</td></tr>
                                <tr><td>7</td><td>347</td><td>26.9</td><td>R$ 9,426.59</td></tr>
                                <tr><td>8</td><td>247</td><td>31.3</td><td>R$ 10,971.03</td></tr>
                                <tr><td>9</td><td>209</td><td>29.2</td><td>R$ 10,234.18</td></tr>
                                <tr><td>10</td><td>150</td><td>28.8</td><td>R$ 10,088.29</td></tr>
                                <tr><td>11</td><td>103</td><td>29.0</td><td>R$ 10,166.38</td></tr>
                                <tr><td>12</td><td>52</td><td>32.2</td><td>R$ 11,279.57</td></tr>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Instruções para o Programador (Funcionalidades e Interatividade)</h2>
            <ul>
                <li><strong>Layout Responsivo:</strong> Garantir que o design se adapte a desktops, tablets e celulares.</li>
                <li><strong>Estado Único (One-Page Core):</strong> A página não deve recarregar ao aplicar filtros. As atualizações devem ser instantâneas (requer JavaScript).</li>
                <li><strong>Cross-Filtering Total (Funcionalidade Chave):</strong> Clicar em um elemento de qualquer gráfico (ex: uma fatia de pizza, uma barra, uma linha) deve filtrar todos os outros gráficos e tabelas na página.</li>
                <li><strong>Tooltips Detalhados:</strong> Implementar janelas de informação que aparecem ao passar o mouse sobre os elementos dos gráficos, exibindo os dados exatos.</li>
                <li><strong>Exportação:</strong> O botão "Exportar" no cabeçalho deve gerar um arquivo CSV ou Excel com os dados da visualização atual, respeitando os filtros aplicados.</li>
            </ul>
        </section>

    </div>

</body>
</html>
